"use strict";(self.webpackChunke_commerce_client=self.webpackChunke_commerce_client||[]).push([[592],{4466:(T,u,e)=>{e.d(u,{r:()=>a});var h=e(5698),d=e(2340);class v{constructor(t=[],r="",s=0,l=9.95,c=8.75,f=0,m=0){this.orderedProducts=t,this.orderTime=r,this.subtotal=s,this.shippingFee=l,this.tax=c,this.taxFee=f,this.totalCharge=m}calculateAllCharges(){this.calculateSubtotal(),this.calculateTaxFee(),this.calculateTotalCharge()}calculateSubtotal(){this.orderedProducts.forEach(t=>{t.canFulfill&&(this.subtotal+=t.product.price*t.quantity)})}calculateTaxFee(){this.taxFee=Math.round(this.tax*this.subtotal)/100}calculateTotalCharge(){this.totalCharge=this.subtotal+this.shippingFee+this.taxFee}}var o=e(3327),i=e(4650),p=e(910),S=e(529),g=e(2410),F=e(5139);class a{constructor(t,r,s,l){this.cartServices=t,this.http=r,this.loginServices=s,this.spinnerService=l,this.orderUrl=`${d.N.api.url}/orders`,this.orderState=o.Kq.NOT_SUBMIITED}getOrderById(t){return this.http.get(`${this.orderUrl}/${t}`,{headers:this.loginServices.getHeaders()}).pipe((0,h.q)(1))}createOrder(){return this.http.post(this.orderUrl,this.cartServices.selectedProducts,{headers:this.loginServices.getHeaders()}).pipe((0,h.q)(1))}initOrderFrom(t){let r=new v;return t.forEach(s=>{let c={product:{...s.product},canFulfill:s.can_fulfill,quantity:s.quantity};r.orderedProducts.push(c)}),r.calculateAllCharges(),r}setOrderState(t){this.orderState=t}getOrderState(){return this.orderState}isOrderSubmitting(){return this.orderState==o.Kq.SUBMITTING}}a.\u0275fac=function(t){return new(t||a)(i.LFG(p.N),i.LFG(S.eN),i.LFG(g.r),i.LFG(F.V))},a.\u0275prov=i.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}}]);