"use strict";(self.webpackChunke_commerce_client=self.webpackChunke_commerce_client||[]).push([[518],{5518:(A,p,i)=>{i.r(p),i.d(p,{CartComponent:()=>a});var c=i(3327),h=i(8176),C=i(1757),l=i(6895),v=i(4850),t=i(4650),f=i(6958),m=i(910),S=i(6754);function x(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",1),t._UZ(1,"img",2),t.TgZ(2,"div",3)(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA(),t.TgZ(9,"div",4)(10,"div",5)(11,"quant-select",6),t.NdJ("onClick",function(r){t.CHM(e);const u=t.oxw();return t.KtG(u.setQuantitySelect(r))}),t.qZA(),t.TgZ(12,"i",7),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onRemoveClick())}),t.qZA()(),t.TgZ(13,"p",8),t._uU(14),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(1),t.s9C("src",e.selectedProduct.product.photoUrl,t.LSH),t.xp6(3),t.Oqu(e.selectedProduct.product.name),t.xp6(2),t.hij("Item #",e.selectedProduct.product.id,""),t.xp6(2),t.hij("$",e.selectedProduct.product.price,""),t.xp6(3),t.Q6J("quant",e.selectedProduct.quantity),t.xp6(3),t.hij("$",e.selectedProduct.quantity*e.selectedProduct.product.price,"")}}class d{constructor(o,e){this.cartServices=o,this.productServices=e,this.onRemove=new t.vpe,this.quantityOptions=Array.from({length:10},(s,r)=>r+1)}onRemoveClick(){this.onRemove.emit(this.selectedProduct.product)}setQuantitySelect(o){this.selectedProduct.quantity=o,this.cartServices.saveSelectedProductsToLocal()}}d.\u0275fac=function(o){return new(o||d)(t.Y36(m.U),t.Y36(S.o))},d.\u0275cmp=t.Xpm({type:d,selectors:[["cart-product"]],inputs:{selectedProduct:"selectedProduct"},outputs:{onRemove:"onRemove"},standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["id","cart-product-container",4,"ngIf"],["id","cart-product-container"],[3,"src"],["id","detail-container"],[2,"display","flex","position","relative","align-items","center"],[2,"display","flex","position","relative","align-items","center","width","90%"],[3,"quant","onClick"],[1,"bi","bi-trash2",3,"click"],[2,"position","relative","margin-top","auto","margin-bottom","auto","display","inline-block","width","10%","text-align","end"]],template:function(o,e){1&o&&t.YNc(0,x,15,6,"div",0),2&o&&t.Q6J("ngIf",e.selectedProduct)},dependencies:[f.r,l.O5],styles:["#cart-product-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;height:200px;padding:10px;border-bottom:.5px rgb(196,196,196) solid}img[_ngcontent-%COMP%]{position:relative;height:100%}#detail-container[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;margin-left:10px}#detail-container[_ngcontent-%COMP%]:nth-child(1){font-weight:600;font-size:larger}i[_ngcontent-%COMP%]{display:inline-block;font-size:30px;margin-left:20px}i[_ngcontent-%COMP%]:hover{cursor:pointer}"]});var g=i(4859),T=i(8869),Z=i(4465),P=i(4466),y=i(6105);function _(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"cart-product",11),t.NdJ("onRemove",function(r){t.CHM(e);const u=t.oxw(2);return t.KtG(u.onRemoveClick(r))}),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(1),t.Q6J("selectedProduct",e)}}function U(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"h1"),t._uU(3," Your Cart "),t.TgZ(4,"h2",6),t._uU(5),t.qZA()(),t._UZ(6,"mat-divider"),t.YNc(7,_,2,1,"div",7),t.qZA(),t.TgZ(8,"div",8)(9,"h2"),t._uU(10,"Order Summary"),t.qZA(),t.TgZ(11,"h4"),t._uU(12," Subtotal "),t.TgZ(13,"div",9),t._uU(14),t.qZA()(),t.TgZ(15,"h4"),t._uU(16," Estimated Shipping "),t.TgZ(17,"div",9),t._uU(18,"$9.95"),t.qZA()(),t.TgZ(19,"h4"),t._uU(20," Estimated Total "),t.TgZ(21,"div",9),t._uU(22),t.qZA()(),t.TgZ(23,"button",10),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onCheckoutClick())}),t._uU(24," Checkout "),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(5),t.hij(" (",e.cartServices.countProducts()," items) "),t.xp6(2),t.Q6J("ngForOf",e.cartServices.selectedProducts),t.xp6(7),t.hij("$",e.cartServices.getSubtotal(),""),t.xp6(8),t.hij("$",e.cartServices.getSubtotal()+9.95,""),t.xp6(1),t.Q6J("disabled",e.orderServices.isOrderSubmitting())}}function O(n,o){1&n&&(t.TgZ(0,"h1"),t._uU(1," Your cart is empty. Click "),t.TgZ(2,"a",12),t._uU(3,"here"),t.qZA(),t._uU(4," to go back to Products page. "),t.qZA())}class a{constructor(o,e,s,r){this.cartServices=o,this.toastServices=e,this.orderServices=s,this.loginServices=r}onRemoveClick(o){this.cartServices.removeProduct(o.id),this.toastServices.showToast(`${o.name} removed from your cart`,c.pC.SUCCESS)}onCheckoutClick(){this.loginServices.hasLoggedIn()?(this.orderServices.setOrderState(c.Kq.SUBMITTING),this.orderServices.createOrder().subscribe({next:({url:o})=>{this.orderServices.setOrderState(c.Kq.SUBMITTED),this.toastServices.showToast("Thank you for placing an order with us!",c.pC.SUCCESS).onHidden.subscribe({next:()=>{(0,h.gB)(o)}})},error:o=>{this.orderServices.setOrderState(c.Kq.NOT_SUBMIITED),console.log(o)}})):this.toastServices.showToast("You need to login to place orders.",c.pC.WARNING)}onRemoveAllClick(){this.cartServices.removeAllProducts(),this.toastServices.showToast("All products have been removed from your cart",c.pC.SUCCESS)}}a.\u0275fac=function(o){return new(o||a)(t.Y36(m.U),t.Y36(Z.j),t.Y36(P.r),t.Y36(y.J))},a.\u0275cmp=t.Xpm({type:a,selectors:[["ng-component"]],standalone:!0,features:[t.jDz],decls:4,vars:3,consts:[[1,"route-container"],[3,"isDisplayed"],["style","display: flex; align-items: flex-start",4,"ngIf"],[4,"ngIf"],[2,"display","flex","align-items","flex-start"],[2,"display","inline-block","width","70%"],[2,"display","inline","font-weight","lighter"],[4,"ngFor","ngForOf"],["id","os-container"],[1,"prices"],["mat-raised-button","",3,"disabled","click"],[3,"selectedProduct","onRemove"],["routerLink","/products"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"spinner",1),t.YNc(2,U,25,5,"div",2),t.YNc(3,O,5,0,"h1",3),t.qZA()),2&o&&(t.xp6(1),t.Q6J("isDisplayed",e.orderServices.isOrderSubmitting()),t.xp6(1),t.Q6J("ngIf",e.cartServices.selectedProducts.length>0),t.xp6(1),t.Q6J("ngIf",0==e.cartServices.selectedProducts.length))},dependencies:[C.O,l.O5,v.t,v.d,l.ax,d,g.ot,g.lW,T.rH],styles:["button[_ngcontent-%COMP%]{width:100%}#os-container[_ngcontent-%COMP%]{background-color:#f0f0f080;border-radius:10%;display:inline-block;margin-left:20px;padding:20px;width:30%}h4[_ngcontent-%COMP%]{padding:auto}a[_ngcontent-%COMP%]{text-decoration:underline;color:#00f}.prices[_ngcontent-%COMP%]{display:inline;float:right}"]})}}]);