"use strict";(self.webpackChunke_commerce_client=self.webpackChunke_commerce_client||[]).push([[592],{4466:(O,d,s)=>{s.d(d,{r:()=>i});var u=s(2340);class n{constructor(t=[],e="",r=0,c=9.95,l=8.75,f=0,m=0){this.orderedProducts=t,this.orderTime=e,this.subtotal=r,this.shippingFee=c,this.tax=l,this.taxFee=f,this.totalCharge=m}calculateAllCharges(){this.calculateSubtotal(),this.calculateTaxFee(),this.calculateTotalCharge()}calculateSubtotal(){this.orderedProducts.forEach(t=>{t.canFulfill&&(this.subtotal+=t.product.price*t.quantity)})}calculateTaxFee(){this.taxFee=Math.round(this.tax*this.subtotal)/100}calculateTotalCharge(){this.totalCharge=this.subtotal+this.shippingFee+this.taxFee}}class v{constructor(t,e,r){this.product=t,this.canFulfill=e,this.quantity=r}}var h=s(3327),a=s(4650),S=s(910),g=s(529),p=s(6754),F=s(6105);class i{constructor(t,e,r,c){this.cartServices=t,this.http=e,this.productServices=r,this.loginServices=c,this.orderUrl=`${u.N.api.url}/orders`,this.orderState=h.Kq.NOT_SUBMIITED}getOrderById(t){return this.http.get(`${this.orderUrl}/${t}`,{headers:this.loginServices.getHeaders()})}createOrder(){return console.log(this.cartServices.selectedProducts),this.http.post(this.orderUrl,this.cartServices.selectedProducts,{headers:this.loginServices.getHeaders()})}initOrderFrom(t){let e=new n;return t.forEach(r=>{let c=this.productServices.initProductFrom(r.product),l=new v(c,r.can_fulfill,r.ordered_quantity);e.orderedProducts.push(l)}),e.calculateAllCharges(),e}setOrderState(t){this.orderState=t}getOrderState(){return this.orderState}isOrderSubmitting(){return this.orderState==h.Kq.SUBMITTING}}i.\u0275fac=function(t){return new(t||i)(a.LFG(S.U),a.LFG(g.eN),a.LFG(p.o),a.LFG(F.J))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}}]);