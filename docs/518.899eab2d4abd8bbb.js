"use strict";(self.webpackChunke_commerce_client=self.webpackChunke_commerce_client||[]).push([[518],{5518:(x,g,o)=>{o.r(g),o.d(g,{CartComponent:()=>v});var i=o(6895),s=o(4859),l=o(4850),u=o(3060),c=o(3327),d=o(8176),C=o(1757),t=o(4650),p=o(6958),_=o(910),P=o(6082);function S(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"div",1),t._UZ(1,"img",2),t.TgZ(2,"div",3)(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA(),t.TgZ(9,"div",4)(10,"div",5)(11,"quant-select",6),t.NdJ("onClick",function(a){t.CHM(e);const f=t.oxw();return t.KtG(f.setQuantitySelect(a))}),t.qZA(),t.TgZ(12,"i",7),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onRemoveClick())}),t.qZA()(),t.TgZ(13,"p",8),t._uU(14),t.qZA()()()()}if(2&r){const e=t.oxw();t.xp6(1),t.s9C("src",e.selectedProduct.product.photoUrl,t.LSH),t.xp6(3),t.Oqu(e.selectedProduct.product.name),t.xp6(2),t.hij("Item #",e.selectedProduct.product.id,""),t.xp6(2),t.hij("$",e.selectedProduct.product.price,""),t.xp6(3),t.Q6J("quant",e.selectedProduct.quantity),t.xp6(3),t.hij("$",e.selectedProduct.quantity*e.selectedProduct.product.price,"")}}class m{constructor(n,e){this.cartServices=n,this.productServices=e,this.onRemove=new t.vpe,this.quantityOptions=Array.from({length:10},(h,a)=>a+1)}onRemoveClick(){this.onRemove.emit(this.selectedProduct.product)}setQuantitySelect(n){this.selectedProduct.quantity=n,this.cartServices.saveSelectedProductsToLocal()}}m.\u0275fac=function(n){return new(n||m)(t.Y36(_.U),t.Y36(P.o))},m.\u0275cmp=t.Xpm({type:m,selectors:[["cart-product"]],inputs:{selectedProduct:"selectedProduct"},outputs:{onRemove:"onRemove"},standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["id","cart-product-container",4,"ngIf"],["id","cart-product-container"],[3,"src"],["id","detail-container"],[2,"display","flex","position","relative","align-items","center"],[2,"display","flex","position","relative","align-items","center","width","90%"],[3,"quant","onClick"],[1,"bi","bi-trash2",3,"click"],[2,"position","relative","margin-top","auto","margin-bottom","auto","display","inline-block","width","10%","text-align","end"]],template:function(n,e){1&n&&t.YNc(0,S,15,6,"div",0),2&n&&t.Q6J("ngIf",e.selectedProduct)},dependencies:[i.O5,p.r],styles:["#cart-product-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;height:200px;padding:10px;border-bottom:.5px rgb(196,196,196) solid}img[_ngcontent-%COMP%]{position:relative;height:100%}#detail-container[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;margin-left:10px}#detail-container[_ngcontent-%COMP%]:nth-child(1){font-weight:600;font-size:larger}i[_ngcontent-%COMP%]{display:inline-block;font-size:30px;margin-left:20px}i[_ngcontent-%COMP%]:hover{cursor:pointer}"]});var T=o(4465),O=o(4466),y=o(6105);function U(r,n){1&r&&(t.TgZ(0,"h1"),t._uU(1," Your cart is empty. Click "),t.TgZ(2,"a",4),t._uU(3,"here"),t.qZA(),t._uU(4," to go back to Products page. "),t.qZA())}function Z(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"cart-product",12),t.NdJ("onRemove",function(a){t.CHM(e);const f=t.oxw(2);return t.KtG(f.onRemoveClick(a))}),t.qZA()()}if(2&r){const e=n.$implicit;t.xp6(1),t.Q6J("selectedProduct",e)}}function b(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"h1"),t._uU(3," Your Cart "),t.TgZ(4,"h2",7),t._uU(5),t.qZA()(),t._UZ(6,"mat-divider"),t.YNc(7,Z,2,1,"div",8),t.qZA(),t.TgZ(8,"div",9)(9,"h2"),t._uU(10,"Order Summary"),t.qZA(),t.TgZ(11,"h4"),t._uU(12," Subtotal "),t.TgZ(13,"div",10),t._uU(14),t.qZA()(),t.TgZ(15,"h4"),t._uU(16," Estimated Shipping "),t.TgZ(17,"div",10),t._uU(18,"$9.95"),t.qZA()(),t.TgZ(19,"h4"),t._uU(20," Estimated Total "),t.TgZ(21,"div",10),t._uU(22),t.qZA()(),t.TgZ(23,"button",11),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCheckoutClick())}),t._uU(24," Checkout "),t.qZA()()()}if(2&r){const e=t.oxw();t.xp6(5),t.hij(" (",e.cartServices.countProducts()," items) "),t.xp6(2),t.Q6J("ngForOf",e.cartServices.selectedProducts),t.xp6(7),t.hij("$",e.cartServices.getSubtotal(),""),t.xp6(8),t.hij("$",e.cartServices.getSubtotal()+9.95,""),t.xp6(1),t.Q6J("disabled",e.orderServices.isOrderSubmitting())}}class v{constructor(n,e,h,a){this.cartServices=n,this.toastServices=e,this.orderServices=h,this.loginServices=a}onRemoveClick(n){this.cartServices.removeProduct(n.id),this.toastServices.showToast(`${n.name} removed from your cart`,c.pC.SUCCESS)}onCheckoutClick(){this.loginServices.hasLoggedIn()?(this.orderServices.setOrderState(c.Kq.SUBMITTING),this.orderServices.createOrder().subscribe({next:({url:n})=>{this.orderServices.setOrderState(c.Kq.SUBMITTED),this.toastServices.showToast("Thank you for placing an order with us!",c.pC.SUCCESS).onHidden.subscribe({next:()=>{(0,d.gB)(n)}})},error:n=>{this.orderServices.setOrderState(c.Kq.NOT_SUBMIITED),console.log(n)}})):this.toastServices.showToast("You need to login to place orders.",c.pC.WARNING)}onRemoveAllClick(){this.cartServices.removeAllProducts(),this.toastServices.showToast("All products have been removed from your cart",c.pC.SUCCESS)}}v.\u0275fac=function(n){return new(n||v)(t.Y36(_.U),t.Y36(T.j),t.Y36(O.r),t.Y36(y.J))},v.\u0275cmp=t.Xpm({type:v,selectors:[["ng-component"]],standalone:!0,features:[t.jDz],decls:4,vars:3,consts:[[1,"route-container"],[3,"isDisplayed"],[4,"ngIf"],["style","display: flex; align-items: flex-start",4,"ngIf"],["routerLink","/products"],[2,"display","flex","align-items","flex-start"],[2,"display","inline-block","width","70%"],[2,"display","inline","font-weight","lighter"],[4,"ngFor","ngForOf"],["id","os-container"],[1,"prices"],["mat-raised-button","",3,"disabled","click"],[3,"selectedProduct","onRemove"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"spinner",1),t.YNc(2,U,5,0,"h1",2),t.YNc(3,b,25,5,"div",3),t.qZA()),2&n&&(t.xp6(1),t.Q6J("isDisplayed",e.orderServices.isOrderSubmitting()),t.xp6(1),t.Q6J("ngIf",0==e.cartServices.selectedProducts.length),t.xp6(1),t.Q6J("ngIf",e.cartServices.selectedProducts.length>0))},dependencies:[C.O,i.ax,i.O5,l.t,l.d,m,s.ot,s.lW,u.rH],styles:[".route-container[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{margin:100px auto auto;text-align:center;font-weight:200}button[_ngcontent-%COMP%]{width:100%}#os-container[_ngcontent-%COMP%]{background-color:#f0f0f080;border-radius:10%;display:inline-block;margin-left:20px;padding:20px;width:30%}h4[_ngcontent-%COMP%]{padding:auto}a[_ngcontent-%COMP%]{text-decoration:underline;color:#00f}.prices[_ngcontent-%COMP%]{display:inline;float:right}"]})},6958:(x,g,o)=>{o.d(g,{r:()=>s});var i=o(4650);class s{constructor(){this.onClick=new i.vpe}onIncrementClick(){this.onClick.emit(this.quant+1)}onDecrementClick(){this.quant>1&&this.onClick.emit(this.quant-1)}}s.\u0275fac=function(u){return new(u||s)},s.\u0275cmp=i.Xpm({type:s,selectors:[["quant-select"]],inputs:{quant:"quant"},outputs:{onClick:"onClick"},standalone:!0,features:[i.jDz],decls:6,vars:1,consts:[["id","quant-select-container"],["id","left",3,"click"],["readonly","",3,"value"],["id","right",3,"click"]],template:function(u,c){1&u&&(i.TgZ(0,"div",0)(1,"button",1),i.NdJ("click",function(){return c.onDecrementClick()}),i._uU(2,"-"),i.qZA(),i._UZ(3,"input",2),i.TgZ(4,"button",3),i.NdJ("click",function(){return c.onIncrementClick()}),i._uU(5,"+"),i.qZA()()),2&u&&(i.xp6(3),i.s9C("value",c.quant))},styles:["#quant-select-container[_ngcontent-%COMP%]{position:relative;display:flex;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;margin-left:auto;margin-right:auto}input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:50px;height:50px}input[_ngcontent-%COMP%]{border-left:none;border-right:none;border-bottom:solid;border-top:solid;border-width:.5px;text-align:center;margin-left:-25px;margin-right:-25px;z-index:2}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}button[_ngcontent-%COMP%]{border:1px solid black;border-radius:50%;background-color:#fff;padding:10px}#left[_ngcontent-%COMP%]{text-align:left;font-weight:600}#right[_ngcontent-%COMP%]{text-align:right}"]})},6082:(x,g,o)=>{o.d(g,{o:()=>d});var i=o(1135),s=o(2340),l=o(4650),u=o(529),c=o(6105);class d{constructor(t,p){this.http=t,this.loginServices=p,this._products=new i.X([]),this.products$=this._products.asObservable(),this._pageIndex=new i.X(0),this.pageIndex$=this._pageIndex.asObservable(),this.pageSize=15,this.productsUrl=`${s.N.api.url}/products`,this.pageIndex$.subscribe({next:_=>{this.getProducts()}})}get products(){return this._products.getValue()}set products(t){this._products.next(t)}get pageIndex(){return this._pageIndex.getValue()}set pageIndex(t){this._pageIndex.next(t)}getProducts(){this.http.get(this.productsUrl,{params:{pageSize:this.pageSize,pageIndex:this.pageIndex+1}}).subscribe({next:t=>{t.forEach(p=>{this.updatePhotoUrl(p)}),this.products=t},error:t=>{console.error(t)}})}getProductById(t){return this.http.get(`${this.productsUrl}/${t}`)}updateProduct(t,p={}){return this.http.patch(`${this.productsUrl}/${t}`,p,{headers:this.loginServices.getHeaders()})}updatePhotoUrl(t){t.photoUrl=s.N.googleStorageURL+"/products/"+t.photo_key}}d.\u0275fac=function(t){return new(t||d)(l.LFG(u.eN),l.LFG(c.J))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}}]);