"use strict";(self.webpackChunke_commerce_client=self.webpackChunke_commerce_client||[]).push([[592],{4466:(w,S,l)=>{l.d(S,{r:()=>u});var E=l(2340);class f{constructor(h=[],i="",e=0,t=9.95,s=8.75,c=0,r=0){this.orderedProducts=h,this.orderTime=i,this.subtotal=e,this.shippingFee=t,this.tax=s,this.taxFee=c,this.totalCharge=r}calculateAllCharges(){this.calculateSubtotal(),this.calculateTaxFee(),this.calculateTotalCharge()}calculateSubtotal(){this.orderedProducts.forEach(h=>{h.canFulfill&&(this.subtotal+=h.product.price*h.quantity)})}calculateTaxFee(){this.taxFee=Math.round(this.tax*this.subtotal)/100}calculateTotalCharge(){this.totalCharge=this.subtotal+this.shippingFee+this.taxFee}}var v=l(3327),m=l(4650),y=l(910),T=l(529),V=l(6082),C=l(6105);class u{constructor(h,i,e,t){this.cartServices=h,this.http=i,this.productServices=e,this.loginServices=t,this.orderUrl=`${E.N.api.url}/orders`,this.orderState=v.Kq.NOT_SUBMIITED}getOrderById(h){return this.http.get(`${this.orderUrl}/${h}`,{headers:this.loginServices.getHeaders()})}createOrder(){return console.log(this.cartServices.selectedProducts),this.http.post(this.orderUrl,this.cartServices.selectedProducts,{headers:this.loginServices.getHeaders()})}initOrderFrom(h){let i=new f;return h.forEach(e=>{let s={product:{...e.product},canFulfill:e.can_fulfill,quantity:e.ordered_quantity};i.orderedProducts.push(s)}),i.calculateAllCharges(),i}setOrderState(h){this.orderState=h}getOrderState(){return this.orderState}isOrderSubmitting(){return this.orderState==v.Kq.SUBMITTING}}u.\u0275fac=function(h){return new(h||u)(m.LFG(y.U),m.LFG(T.eN),m.LFG(V.o),m.LFG(C.J))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})},5017:(w,S,l)=>{l.d(S,{A8:()=>p,Ov:()=>C});var E=l(7579),f=l(4650);class C{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(e=!1,t,s=!0,c){this._multiple=e,this._emitChanges=s,this.compareWith=c,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new E.x,t&&t.length&&(e?t.forEach(r=>this._markSelected(r)):this._markSelected(t[0]),this._selectedToEmit.length=0)}select(...e){this._verifyValueAssignment(e),e.forEach(s=>this._markSelected(s));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(s=>this._unmarkSelected(s));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,s=new Set(e);e.forEach(r=>this._markSelected(r)),t.filter(r=>!s.has(r)).forEach(r=>this._unmarkSelected(r));const c=this._hasQueuedChanges();return this._emitChangeEvent(),c}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){return this._selection.has(this._getConcreteValue(e))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){e=this._getConcreteValue(e),this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){e=this._getConcreteValue(e),this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(e){if(this.compareWith){for(let t of this._selection)if(this.compareWith(e,t))return t;return e}return e}}let p=(()=>{class i{constructor(){this._listeners=[]}notify(t,s){for(let c of this._listeners)c(t,s)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(s=>t!==s)}}ngOnDestroy(){this._listeners=[]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);