"use strict";(self.webpackChunke_commerce_client=self.webpackChunke_commerce_client||[]).push([[592],{4466:(m,n,r)=>{r.d(n,{r:()=>i});var u=r(2340);class d{constructor(t=[],e="",s=0,h=9.95,c=8.75,f=0,F=0){this.orderedProducts=t,this.orderTime=e,this.subtotal=s,this.shippingFee=h,this.tax=c,this.taxFee=f,this.totalCharge=F}calculateAllCharges(){this.calculateSubtotal(),this.calculateTaxFee(),this.calculateTotalCharge()}calculateSubtotal(){this.orderedProducts.forEach(t=>{t.canFulfill&&(this.subtotal+=t.product.price*t.quantity)})}calculateTaxFee(){this.taxFee=Math.round(this.tax*this.subtotal)/100}calculateTotalCharge(){this.totalCharge=this.subtotal+this.shippingFee+this.taxFee}}var l=r(3327),a=r(4650),p=r(910),v=r(529),S=r(4120),g=r(5139);class i{constructor(t,e,s,h){this.cartServices=t,this.http=e,this.loginServices=s,this.spinnerService=h,this.orderUrl=`${u.N.api.url}/orders`,this.orderState=l.Kq.NOT_SUBMIITED}getOrderById(t){return this.spinnerService.show=!0,this.http.get(`${this.orderUrl}/${t}`,{headers:this.loginServices.getHeaders()}).pipe(e=>(this.spinnerService.show=!1,e))}createOrder(){return this.spinnerService.show=!0,this.http.post(this.orderUrl,this.cartServices.selectedProducts,{headers:this.loginServices.getHeaders()}).pipe(t=>(this.spinnerService.show=!1,t))}initOrderFrom(t){let e=new d;return t.forEach(s=>{let c={product:{...s.product},canFulfill:s.can_fulfill,quantity:s.ordered_quantity};e.orderedProducts.push(c)}),e.calculateAllCharges(),e}setOrderState(t){this.orderState=t}getOrderState(){return this.orderState}isOrderSubmitting(){return this.orderState==l.Kq.SUBMITTING}}i.\u0275fac=function(t){return new(t||i)(a.LFG(p.N),a.LFG(v.eN),a.LFG(S.J),a.LFG(g.V))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}}]);